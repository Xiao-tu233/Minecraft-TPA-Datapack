# 1.3 使用除错

本节将引导你逐步排查问题，以确认 TPA 数据包是否已被正确安装并完成初始化。

---

## 一、确认数据包是否被正确加载

请先在游戏内执行`/datapack list`，观察列表中是否存在 **TPA_Datapack**。

### 若未显示 TPA_Datapack

这通常表示数据包未被正确安装，请检查以下内容：

- 所下载的数据包所支持的 **游戏版本范围** 是否包含当前服务器或存档的游戏版本  
  （注意：服务器版本不一定与客户端版本相同）
- 是否将数据包放入了**正确的存档文件夹**
  - 若服务器安装了模组，可从模组文件夹向上返回一级，通常即为服务器根目录
  - 部分服务器可能修改了默认的存档名称，可通过检查  
    `server.properties`中的`level-name`键来确认实际使用的存档文件夹名称
  - 对于单人存档，建议先保存并退出世界，然后在单人游戏界面中选择最近保存的世界，
    点击下方的`打开存档文件夹`按钮即可定位

---

## 二、确认核心函数是否正常运行

如果 **TPA_Datapack** 已存在，请继续执行`/trigger tpa`，以检查核心函数是否正常工作。

### 显示“未知的记分项 'tpa'”

这表示 **load 函数未正常执行**。

处理方式如下：

- 在游戏内执行一次`/reload`
- 或直接执行`/function tpa:load`

通常在服务器重启或数据包重载后，需要确保 load 函数至少被成功执行一次。

---

### 显示“你尚无法触发该记分项”

这通常表示 **tick 函数未正常运行**，或当前 tick 被跳过。

请按以下顺序排查：

#### 检查运行频率设置

- 执行`/function tpa:options`
- 检查数据包的运行频率是否被设置得过低
- 建议将其恢复为默认值 **20**

#### 完整版特有情况（1.15 – 1.20.1）

在部分版本的完整版中，若某个传送进程异常持续运行，也可能导致 tick 无法正常结束。

此时可以考虑：

- 将传送执行者手动传送至**预期终点附近**，
  以便终点锚点被正确检测，从而终止传送状态

相关信息可通过以下方式确认：

- 使用`/data get storage tpa:tpa temp.teleport`查看预期终点坐标
- 正在执行传送的玩家会带有`tpa.teleport`标签

- 示例（以 1.20.1 为例）

假设通过 data get 指令获取到如下信息：

{ x: 1024.5d, y: 64.0d, z: 13.0d, dim: "minecraft:overworld", ... }

则可以执行：

`execute in minecraft:overworld run tp @p[tag=tpa.teleport] 1024 64 13`

---

#### tick 标签函数完全未运行的情况

如果确认以上情况均不适用，且 tick 相关标签函数仍未正常工作：

- 请使用 **OP 权限的玩家客户端** 执行  
  `/function tpa:tick_not_working`或者点击设置菜单中的`[无法运行]`按钮
- 并根据函数中给出的提示进行处理

---

由于实际环境和情况可能较为复杂，  
如果问题仍无法解决，欢迎加入交流群进一步咨询。


## 历史
| 版本 | 内容 |
| :-- | :-- |
| 2.0.2 | 加入了`tpa:tick_not_working`函数 |
| 2.0.6 | 在设置选项中加入了`无法运行`按钮 |
| 2.0.6 | 加入了`是否使用/schedule指令调用Tick函数`设置选项 |
| 2.0.6 | 无法工作函数现在在给到命令方块的同时会提示上述设置选项 |