# 安装、更新、下载和版本区分

版本支持/兼容: 所有版本

## 版本区分
TPA数据包的版本分为轻量版和完整版

轻量版坚持轻量及不使用宏函数的原则以保持其轻量而没有漏洞的特点

完整版则多加利用包括宏函数在内的游戏特性将各种方便玩家的功能写入其中 以方便玩家的传送体验

相比来说，轻量版仅支持类似原版 /tp 的传送 直接将请求者传送到被请求者 而完整版则会分别询问两方是否要取消 和 接受/拒绝 等到被请求者同意了请求之后 传送请求才会实现

根据以上特点 我们便根据情况有以下推荐：

如果你是玩家相对较少的服务器或者玩家局域网联机（包括内网穿透、RadminLAN系的软件或者直接面对面在同一局域网下的联机）更推荐你使用轻量版

而如果你是小型到中型服务器的服主 或者说在某些地方你需要用到某些完整版的功能 请考虑使用完整版

如果你是大型服务器服主 我们从服主这一身份出发道德上可能甚至不推荐你使用TPA数据包 因为事实上存在更适合你们服务器的相关插件或模组 但如果你在寻找其他插件或模组上有困难 我们也欢迎你向我们提出问题

1.13版本以下的用户 请考虑使用模组、插件或者根据下述的建议命令方块组来达到这一功能

```mcfunction
...
```

## 下载
我们目前已经兼容了尽量多的平台 以确保大家在各个平台无论网络如何都能使用到TPA数据包

- Github: https://github.com/Xiao-tu233/Minecraft-TPA-Datapack/
- Modrinth: https://modrinth.com/datapack/tpa-datapack
- Curseforge: https://www.curseforge.com/minecraft/data-packs/tpa-datapack
- PlanetMinecraft: https://www.planetminecraft.com/data-pack/tpa-datapack-6835520/
- MC百科: https://www.mcmod.cn/class/19404.html
- QQ群: 814709389
- Discord: https://discord.gg/QgkpxsFahw

## 安装

安装方法基本与其他数据包相同

### 在云端服务器上

1. 打开您托管服务器的控制台。
2. 找到并点击标有 *File Manager* 的按钮。
3. 接下来的步骤与本地服务器安装相同。

### 在本地服务器上

1. 找到包含服务器 JAR 文件的服务器文件夹。
2. 如果有 `world` 文件夹，请打开 `./world/datapacks/` 目录。
3. 如果没有，或者执行第 4 步后无效，请检查 `server.properties -> level-name` 找到正确的存档文件夹。
4. 将数据包文件放入 `datapacks` 文件夹中。
5. 进入服务器，执行 `/reload`，然后执行 `/datapack list` 确认数据包已被识别。

### 在单人世界中

1. 退出当前世界。
2. 在世界选择菜单中选择目标世界。
3. 点击左下角的 `编辑` 按钮。
4. 点击 `打开世界文件夹` 按钮，如果有该按钮，则跳过第 8 步。
5. 返回世界选择菜单，并记住游戏内标题下的灰色文本。
6. 进入主菜单，然后依次点击 `选项... -> 资源包... -> 打开资源包文件夹...`
7. 然后切换到上级文件夹（应该是 `.minecraft`），进入 `saves` 文件夹，再进入之前记住的灰色文本对应的文件夹（目录类似 `../saves/(你的世界)/datapacks`）。
8. 进入 `datapacks` 文件夹，将数据包文件放入其中。
9. 进入世界，执行 `/datapack list` 确认数据包已被识别。

### 在创建的新世界中

1. 点击 `更多 -> 数据包 -> 打开资源包文件夹`。
2. 将数据包文件放入其中。
3. 创建世界。
4. 执行 `/datapack list` 确认数据包已被识别。




一般的，如果游戏中出现“未知的记分项”可能是这一步出现问题

根据Minecraft版本和你的需要 选出正确的安装版本

解压数据包（可选）- 解压数据包可以避免压缩包外层又套了一层压缩包的情况 但如果你是从我们官方途径下载的 则不存在该情况

把数据包放到文件夹里. (路径: 服务器是"/world/datapacks/" , 局域网联机是".minecraft/saves/(Your world name)/datapacks")

在游戏中输入指令 /reload 或者重启服务端或者重进存档

如果/trigger tpa出现tpa菜单则安装成功

更新
有两种途径：

对于v2.0.3以下的版本 由于数据包不存在长期储存的数据 可以直接通过卸载重装

*这种方法对于v2.0.3以上版本是不推荐但是可行的 因为这样会同样移除储存的如传送点等数据

在设置菜单下方找到卸载

等待出现英文的卸载成功后删除数据包文件夹中的数据包文件并将新版数据包放入

游戏中输入指令/reload

而对于v2.0.3及以上的版本 我们开发了更为方便的更新功能

在设置菜单中找到更新按钮

点击后跟随其指引行动直到安装成功

## 安装除错

通过该段落内容 跟随调试来确定你已经正确地安装和初始化了本数据包

首先在游戏里/datapack list 观察有没有TPA_Datapack 若没有 则数据包文件没有被正确地安装 请检查如下注意事项:
  - 下载的数据包所兼容的游戏版本范围是否包含目前的服务器或存档 （不一定和客户端版本相同） 的游戏版本
  - 检查服务器文件夹或存档文件夹是否寻找正确     - 如果说有模组可以找模组文件夹然后往回一级就会是服务端文件夹 服务端也有可能存档文件夹名字被更改 可以检查server.properties文件中的level-name键 这个等号后面会是取代默认路径中取代world的单词
    - 对于存档则是建议保存退出存档 然后单人游戏界面里面最上面一个就会是刚保存的存档 选中并点点击下面的打开存档文件夹按钮即可

其次 如果TPA_Datapack存在 则输入/trigger tpa 检查标签函数是否在正常工作

如果显示 未知的记分项'tpa' 则是load函数没有正常加载

如果显示 你尚无法触发该记分项 则是tick函数没有正常加载 或者目前tick被跳过了

如果load函数没有被正常加载 只需要在每次需要重载和重启服务器之后输入/function tpa:load 就可以
当然你看到未知的记分项的当下也应该重载数据包

如果是tick函数没有工作 先排除正常情况即 tick被跳过了
打开/function tpa:options 然后检查数据包运行频率是否被调得过低了 把它调回默认的20就可以
当然还有一种情况会发生在 1.15 - 1.20.1 的完整版中即一个传送进程正在运行 如果它的持续时间多长 考虑直接把传送执行者传送到预期的终点
预期终点通过data get storage tpa:tpa temp.teleport查看 而传送执行者拥有tpa.teleport标签
因此有一下例子
当然由于复杂性 欢迎来群里询问