{
    "condition": "minecraft:all_of",
    "terms": [
        {
            "condition": "minecraft:any_of",
            "terms": [
                {
                    "condition": "minecraft:all_of",
                    "terms": [
                        {
                            "condition": "minecraft:value_check",
                            "value": {
                                "type": "minecraft:storage",
                                "storage": "tpa:tpa",
                                "path": "option.tp_spec" 
                            },
                            "range": 0
                        },
                        {
                            "condition": "minecraft:inverted",
                            "term": {
                                "condition": "minecraft:entity_properties",
                                "entity": "this",
                                "predicate": {
                                    "type_specific": {
                                        "type": "minecraft:player",
                                        "gamemode": ["spectator"]
                                    }
                                }
                            }
                        }
                    ]
                },
                {
                    "condition": "minecraft:value_check",
                    "value": {
                        "type": "minecraft:storage",
                        "storage": "tpa:tpa",
                        "path": "option.tp_spec" 
                    },
                    "range": 1
                }
            ]
        },
        {
            "condition": "minecraft:any_of",
            "terms": [
                {
                    "condition": "minecraft:value_check",
                    "value": {
                        "type": "minecraft:storage",
                        "storage": "tpa:tpa",
                        "path": "option.carpet_fake_player_fix" 
                    },
                    "range": 0
                },
                {
                    "condition": "minecraft:all_of",
                    "terms": [
                        {
                            "condition": "minecraft:value_check",
                            "value": {
                                "type": "minecraft:storage",
                                "storage": "tpa:tpa",
                                "path": "option.carpet_fake_player_fix" 
                            },
                            "range": 1
                        },
                        {
                            "condition": "minecraft:entity_properties",
                            "entity": "this",
                            "predicate": {
                                "nbt": "{Tags: [\"tpa.fake_player\"]}"
                            }
                        }
                    ]
                }
            ]
        }
    ]
}
