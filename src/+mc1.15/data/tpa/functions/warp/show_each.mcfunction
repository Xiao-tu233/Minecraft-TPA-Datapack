# Parent function: tpa:warp/menu, tpa:warp/show_each(loop)

# Check if the warp is available
execute store result score #warp_disabled tpa.variables run data get storage tpa:tpa temp.warp[0].disabled

# Get dimension
data modify storage tpa:tpa temp.args.id set from storage tpa:tpa temp.warp[0].dim
function tpa:dimension/get
execute store result score #dim_num tpa.variables run data get storage tpa:tpa temp.dimension.id

scoreboard players set #current_selected tpa.variables 0
execute if score #i tpa.variables = #editting_warp.trigger tpa.variables run scoreboard players set #current_selected tpa.variables 1

#! Detect editting by compare strings in tick function
# Show exist warp line
execute if score #current_selected tpa.variables matches 0 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches 0 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "green","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "green"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "green"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "green"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "green"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select_hoverevet"}}, "clickEvent": {"action": "suggest_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables "}}]
execute if score #current_selected tpa.variables matches 1 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches 0 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "green","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "green"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "green"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "green"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "green"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect_hoverevet"}}, "clickEvent": {"action": "run_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables 0"}}]

execute if score #current_selected tpa.variables matches 0 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches -1 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "red","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "red"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "red"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "red"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "red"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select_hoverevet"}}, "clickEvent": {"action": "suggest_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables "}}]
execute if score #current_selected tpa.variables matches 1 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches -1 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "red","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "red"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "red"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "red"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "red"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect_hoverevet"}}, "clickEvent": {"action": "run_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables 0"}}]

execute if score #current_selected tpa.variables matches 0 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches 1 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "light_purple","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "light_purple"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "light_purple"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "light_purple"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "light_purple"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select_hoverevet"}}, "clickEvent": {"action": "suggest_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables "}}]
execute if score #current_selected tpa.variables matches 1 if score #warp_disabled tpa.variables matches 0 if score #dim_num tpa.variables matches 1 run tellraw @s ["  ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_number","color": "light_purple","hoverEvent": {"action": "show_text","value": [{"nbt": "temp.warp[0].x", "storage": "tpa:tpa", "color": "light_purple"}," ",{"nbt": "temp.warp[0].y", "storage": "tpa:tpa", "color": "light_purple"}," ",{"nbt": "temp.warp[0].z", "storage": "tpa:tpa", "color": "light_purple"}]}},{"score": {"name": "#i", "objective": "tpa.variables"}, "color": "light_purple"}," ",{"storage": "tpa:tpa","nbt": "loaded_lang.warp_display_tp_button","hoverEvent": {"action": "show_text","value": [{"storage": "tpa:tpa", "nbt": "loaded_lang.warp_display_tp_button_hoverevent"},{"storage": "tpa:tpa", "nbt": "loaded_lang.hoverevent_suggest_tip"}," §l/trigger tpa.warp set ",{"storage": "tpa:tpa", "nbt": "temp.warp[0].number", "bold": true, "underlined": true}]},"clickEvent": {"action": "suggest_command","value": "/trigger tpa.warp set "}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect_hoverevet"}}, "clickEvent": {"action": "run_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables 0"}}]

# Show disabled warp line
execute if score #current_selected tpa.variables matches 0 unless score #warp_disabled tpa.variables matches 0 run tellraw @s ["  ", {"storage": "tpa:tpa", "nbt": "temp.warp[0].name", "color":"gray", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_desc_disabled"}}}, " ", {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_button_tp", "color": "gray", "hoverEvent": {"action": "show_text","value": {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_desc_disabled"}}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_select_hoverevet"}}, "clickEvent": {"action": "suggest_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables "}}]
execute if score #current_selected tpa.variables matches 1 unless score #warp_disabled tpa.variables matches 0 run tellraw @s ["  ", {"storage": "tpa:tpa", "nbt": "temp.warp[0].name", "color":"gray", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_desc_disabled"}}}, " ", {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_button_tp", "color": "gray", "hoverEvent": {"action": "show_text","value": {"storage": "tpa:tpa", "nbt": "loaded_lang.warp_desc_disabled"}}}, " ", {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect", "hoverEvent": {"action": "show_text", "value": {"storage": "tpa:tpa", "nbt": "warp[0].warp_button_unselect_hoverevet"}}, "clickEvent": {"action": "run_command","value": "/scoreboard players set #editting_warp.trigger tpa.variables 0"}}]

# i++
data remove storage tpa:tpa temp.warp[0]
scoreboard players add #i tpa.variables 1

# Loop
execute if data storage tpa:tpa temp.warp[0] run function tpa:warp/show_each
